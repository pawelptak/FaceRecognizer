#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition

#Main Screen with navigation bar on top
<Main>:
    manager: manager #manager for changing screens
    size: root.width, root.height
    rows: 2 #one row for navigation bar and one for content below it

    #showing naviation bar
    TabBar:
        BoxLayout:
            orientation: 'horizontal'
            padding:30,10,30,10
            spacing:10
            row_force_default:True
            row_default_height:40
            canvas.before:
                Color:
                    rgb: 1,1,1,1
                Rectangle:
                    pos: self.pos
                    size: self.size


            #Auto mode button
            CustButton:
                id:auto_mode_button
                text:"Detection"
                color: (0,0,0,1) if root.manager.current=="detection" else normal_text_color
                font_name: font_regular if root.manager.current=="auto" else font_light
                background_down: './Images/pressed.jpg'
                on_release:
                    root.manager.current = "detection"
                    root.manager.transition.direction = "right"
                    root.manager.stack.add_screen(root.manager.current)
                Label:
                    opacity:1 if root.manager.current=="detection" else 0
                    canvas:
                        Color:
                            rgba: header_text_color
                        Line:
                            width: 1.001
                            points: (auto_mode_button.x,auto_mode_button.y+3,auto_mode_button.x+auto_mode_button.width,auto_mode_button.y+3)
                            cap:'none'

            #Learning mode button
            CustButton:
                id:learning_mode_button
                text:"Placeholder"
                #color: (0,0,0,1) if root.manager.current=="learning" else normal_text_color
                font_name: font_regular if root.manager.current=="learning" else font_light
                on_release:
                    root.manager.transition.direction = "left" if root.manager.current == "auto" else "right"
                    #root.manager.current = "learning"
                    root.manager.stack.add_screen(root.manager.current)
                Label:
                    opacity:1 if root.manager.current=="learning" else 0
                    canvas:
                        Color:
                            rgba: header_text_color
                        Line:
                            width: 1.001
                            points: (learning_mode_button.x,learning_mode_button.y+3,learning_mode_button.x+learning_mode_button.width,learning_mode_button.y+3)
                            cap:'none'

            #Manual mode button
            CustButton:
                id:manual_mode_button
                text:"Placeholder"
                #color: (0,0,0,1) if root.manager.current=="manual" else normal_text_color
                font_name: font_regular if root.manager.current=="manual" else font_light
                on_release:
                    root.manager.transition.direction = "left" if root.manager.current == "auto" or root.manager.current == "learning" else "right"
                    #root.manager.current = "manual"
                    root.manager.stack.add_screen(root.manager.current)

                Label:
                    opacity:1 if root.manager.current=="manual" else 0
                    canvas:
                        Color:
                            rgba: header_text_color
                        Line:
                            width: 1.001
                            points: (manual_mode_button.x,manual_mode_button.y+3,manual_mode_button.x+manual_mode_button.width,manual_mode_button.y+3)
                            cap:'none'

            Label:
                size_hint_x:1.5


            #Settings mode button
            CustButton:
                id:settings_mode_button
                size_hint_x: None
                width:40
                on_release:
                    #root.manager.current = "settings"
                    root.manager.transition.direction = "left"
                    root.manager.stack.add_screen(root.manager.current)
                Image:
                    source: './Images/setts.png'
                    center: self.parent.center
                    height: self.parent.height - 12
                    allow_stretch: True
                    opacity:1 if root.manager.current=="settings" else .5
                    mipmap:True

                Label:
                    opacity:1 if root.manager.current=="settings" else 0
                    canvas:
                        Color:
                            rgba: header_text_color
                        Line:
                            width: 1.001
                            points: (settings_mode_button.x+15,settings_mode_button.y+3,settings_mode_button.x+settings_mode_button.width-15,settings_mode_button.y+3)
                            cap:'none'


    #manages changing the screen
    WindowManager:
        id: manager

        #screen classes:
        DetectionScreen:


